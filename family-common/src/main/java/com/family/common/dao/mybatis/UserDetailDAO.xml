<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.family.common.dao.UserDetailDAO" >
  <cache flushInterval="1800000" size="1024" readOnly="true" eviction="LRU"></cache>
  
  <sql id="Base_Column_List" >
    id, gender, birthday, birthplaceCountryId, birthplaceProvinceId, birthplaceCityId, 
    birthplaceCountyId, credit, contribution, zibei, avatar, constellation, industry, jobField, company, 
    workplaceCountryId, workplaceProvinceId, workplaceCityId, tel, ranking, 
    nativePlaceCountryId, nativePlaceProvinceId, nativePlaceCityId, nativePlaceCountyId, 
    ancestralCountryId, ancestralProvinceId, ancestralCityId, ancestralCountyId
  </sql>
  
  <select id="selectByPrimaryKey" resultType="com.family.common.model.UserDetail" parameterType="java.lang.Long" >
    select 
    <include refid="Base_Column_List" />
    from user_detail where id = #{id}
  </select>
  
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long" >
    delete from user_detail where id = #{id}
  </delete>
  
  <insert id="insert" parameterType="com.family.common.model.UserDetail" >
    <selectKey resultType="java.lang.Long" keyProperty="id" order="AFTER" >
      SELECT LAST_INSERT_ID()
    </selectKey>
    insert into user_detail (id, phone)
    values (#{id}, #{phone})
  </insert>
  
  <update id="updateByPrimaryKeySelective" parameterType="com.family.common.model.UserDetail" >
    update user_detail
    <set >
      <if test="zibei != null" >
        zibei = #{zibei},
      </if>
      <if test="gender != null" >
        gender = #{gender},
      </if>
      <if test="birthday != null" >
        birthday = #{birthday},
      </if>
      <if test="birthplaceCountryId != null" >
        birthplaceCountryId = #{birthplaceCountryId},
      </if>
      <if test="birthplaceProvinceId != null" >
        birthplaceProvinceId = #{birthplaceProvinceId},
      </if>
      <if test="birthplaceCityId != null" >
        birthplaceCityId = #{birthplaceCityId},
      </if>
      <if test="birthplaceCountyId != null" >
        birthplaceCountyId = #{birthplaceCountyId},
      </if>
      <if test="constellation != null" >
        constellation = #{constellation},
      </if>
      <if test="industry != null" >
        industry = #{industry},
      </if>
      <if test="jobField != null" >
        jobField = #{jobField},
      </if>
      <if test="company != null" >
        company = #{company},
      </if>
      <if test="workplaceCountryId != null" >
        workplaceCountryId = #{workplaceCountryId},
      </if>
      <if test="workplaceProvinceId != null" >
        workplaceProvinceId = #{workplaceProvinceId},
      </if>
      <if test="workplaceCityId != null" >
        workplaceCityId = #{workplaceCityId},
      </if>
      <if test="phone != null" >
        phone = #{phone},
      </if>
      <if test="tel != null" >
        tel = #{tel},
      </if>
      <if test="ranking != null" >
        ranking = #{ranking},
      </if>
      <if test="nativePlaceCountryId != null" >
        nativePlaceCountryId = #{nativePlaceCountryId},
      </if>
      <if test="nativePlaceProvinceId != null" >
        nativePlaceProvinceId = #{nativePlaceProvinceId},
      </if>
      <if test="nativePlaceCityId != null" >
        nativePlaceCityId = #{nativePlaceCityId},
      </if>
      <if test="nativePlaceCountyId != null" >
        nativePlaceCountyId = #{nativePlaceCountyId},
      </if>
      <if test="ancestralCountryId != null" >
        ancestralCountryId = #{ancestralCountryId},
      </if>
      <if test="ancestralProvinceId != null" >
        ancestralProvinceId = #{ancestralProvinceId},
      </if>
      <if test="ancestralCityId != null" >
        ancestralCityId = #{ancestralCityId},
      </if>
      <if test="ancestralCountyId != null" >
        ancestralCountyId = #{ancestralCountyId},
      </if>
    </set>
    where id = #{id}
  </update>
  
  <update id="updateAvatar" >
    update user_detail
    <set >
      <if test="avatar != null" >
        avatar = #{avatar},
      </if>
    </set>
    where id = #{id}
  </update>
</mapper>